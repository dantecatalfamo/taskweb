<div id="<%= "#{dom_id(heading)}_properties" %>" >
  <% if heading.properties.any? %>
    <details class="heading-properties mb-1" <%= "open" if local_assigns[:open] %> >
      <summary class="list-unstyled font-monospace">PROPERTIES</summary>
      <table>
        <tbody>
          <%= render partial: "heading_properties/heading_property", collection: heading.properties %>
          <%= form_with(model: heading.properties.new, url: heading_heading_properties_path(heading)) do |form| %>
            <tr>
              <td><%= form.text_field :key %></td>
              <td><%= form.text_field :value, autocomplete: 'off' %></td>
            </tr>
            <%= form.hidden_field :heading_id %>
            <%= form.submit style: 'display: none' %>
          <% end %>
        </tbody>
      </table>
      <span class="font-monospace">END</span>
    </details>
  <% end %>
</div>
